<!DOCTYPE html>
<html>
	<!-- adjust to mobile -->
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, height=device-height initial-scale=1">

	<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>

	<!-- added two library files to do youtube embeds -->
	<script src="https://www.youtube.com/iframe_api"></script>
	<script src="angular-youtube-embed.js"></script>
	<title>SquirtleVideoApp</title>
	<!-- Bootstrap CSS -->
	    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css">
	<!-- Our stylesheet -->
	    	<link rel="stylesheet" href="style.css">
	<!-- jQuery -->
	<body ng-app="squirtleApp" ng-controller="squirtleVideosCtrl">
		<!-- ############# VideoListView ############# -->
		<h3>Squirtle's Guide to Being a Pokémon</h3>
		
		<form ng-submit="videoAdd()" class="form-horizontal">
			<label for="videoInput" class="control-label">Youtube id</label>
		    <input type="text" ng-model="videoInput" id="videoInput" size="50" placeholder="Youtube id" class="form-control"/>

		    <label for="titleInput" class="control-label">Video title</label>
		    <input type="text" ng-model="titleInput" id="titleInput" size="50" placeholder="Video title" class="form-control"/>

		    <label for="categoryInput" class="control-label">Category</label>
		    <input type="text" ng-model="categoryInput" id="categoryInput" size="50" placeholder="Category" class="form-control"/>

		    <label for="ratingInput" class="control-label">Rating</label>
		    <select class="form-control" ng-model="ratingInput" id="ratingInput">
				<option>1</option>
				<option>2</option>
				<option>3</option>
				<option>4</option>
				<option>5</option>
			</select>

		    <button class="btn btn-primary" type="submit" style="margin-top: 10px;">Add Video</button>
		</form>
		</br>
		<div class="mini-header">
			<h4> Already Added Videos </h4>
		</div>
			<div class="video-container" ng-repeat="x in videoList">
				<div class="videoTitle" ng-click="videoView =! videoView">
					<!-- this div should be clickable to get to
						the information page with commens etc om en klickar ska en komma till VideoView -->
					{{x.title}}
				</div>
				<youtube-video video-id="x.id" class="thumbnailSize"></youtube-video>
				<div class="rating">
					<img align="left" ng-src="pokeball2.png" ng-repeat="n in range(1,x.rating)"/>
					<div align="right"> Category: {{x.category}}
					</div>
				</div>
			<!-- ############# VideoView ############# -->
				<div class="information-container">
					<div style="margin-top: 10px;">
						<div class="input-group group" style="margin-bottom:5px;">
		   					<input type="text" ng-model="commentInput" id="commentInput" size="50" placeholder="Add a Comment" class="form-control"/>
		   					<span class="input-group-btn">
	   					 	<button class="btn btn-secondary" type="button">Skicka</button>
   					 		</span>
   						 </div>
					</div>
					<div class="comments">
						<ul class="listComments">
							<li class="previousComments" ng-repeat="i in x.comments">
								{{i}}
							</li>
						</ul>
					</div>
				
					<button class="btn btn-primary" ng-click="remove()" style="margin-bottom: 20px;">Remove marked video</button>
				</div> <!-- end information-container -->
			</div> <!-- end video-container -->
				<!--
			    <input type="checkbox" ng-model="x.done"/> <span ng-bind="x.karateText"></span> -->

		<!-- You can use 'youtube-video' as an element or attribute. -->

		<script>
			var app = angular.module('squirtleApp', ['youtube-embed']); 
			app.controller('squirtleVideosCtrl', function($scope) 
			    {
			     $scope.hideRemove = true;
			     $scope.hideComments = true;

			    //create video list
			    $scope.videoList = [
			    	{id: 'gnPXUhBpfDg', title: 'Tarzan - Son of man', category: 'None', rating: 5, comments: ['jesus föddes någon gång för flera flera år sedan i ett land långt långt bort', 'yeah', 'noes']}, 
			    	{id: 'CErbBAX7GWk', title: 'Baby Squirtle Being Cute', category: 'None', rating: 3, comments: ['jesus', 'yeah']}, 
			    	{id: 'aq105Ccv-uw', title: 'Squirtle learns Hydro-Pump', category: 'None', rating: 4, comments: ['yeah', 'boo']}];
			   

			    //create video list
			    //$scope.videoList = [{karateText:'Rika Usama', done:false}, {karateText:'Jesse Enkamp', done:false}];

			    //add new video
			    $scope.videoAdd = function() {//if(video !== in list utför; else;)
			        $scope.videoList.push({id: $scope.videoInput, title: $scope.titleInput, category: $scope.categoryInput, rating: $scope.ratingInput});
			        $scope.videoInput = "";
			        $scope.titleInput = "";
			        $scope.categoryInput = "";
			        $scope.ratingInput = "";
			        };

			    $scope.remove = function() {
			        var oldList = $scope.videoList;
			        $scope.videoList = [];
			        angular.forEach(oldList, function(x) 
			            {
			            if (!x.done) $scope.videoList.push(x);
			            });
			        };

			    $scope.videoView = function(x) {
			    	//console.log(x.id);
			    	//var comment = document.getElementById('x.id');
			    	//$scope.hideComments = false;

			    	//console.log(x);
			    	var id = x.id;
			    	console.log("XID", id);
			    	var comment = document.getElementById('id');
			    	console.log("COMMENTS DIV", comment);
			    	comment.showComments = true;
			    };

			    //function for creating a range
			    $scope.range = function(min, max, step) {
				    step = step || 1;
				    var input = [];
				    for (var i = min; i <= max; i += step) {
				        input.push(i);
				    }
				    return input;
				};
			 
			 //$scope.theBestVideo = 'gnPXUhBpfDg';

			});
		</script>

	</body>
</html>